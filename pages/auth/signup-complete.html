<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>회원가입 완료 - WorkSpace</title>
    
    <!-- CSS 파일들 임포트 -->
    <link rel="stylesheet" href="../../css/common.css">
    <link rel="stylesheet" href="../../css/signup-complete.css">
</head>
<body>
    <!-- 배경 애니메이션 -->
    <div class="bg-animation">
        <div class="floating-element"></div>
        <div class="floating-element"></div>
        <div class="floating-element"></div>
        <div class="floating-element"></div>
        <div class="floating-element"></div>
    </div>

    <div class="complete-container">
        <!-- 성공 아이콘 -->
        <div class="success-icon">
            ✅
        </div>

        <!-- 메인 메시지 -->
        <h1 class="title">회원가입 완료!</h1>
        <p class="subtitle">
            환영합니다! 🎉<br>
            이메일 인증을 완료하면 워크스페이스를 시작할 수 있습니다.
        </p>

        <!-- 이메일 정보 -->
        <div class="email-info">
            <div class="email-icon">📧</div>
            <div class="email-title">인증 이메일을 발송했습니다</div>
            <div class="email-address" id="user-email">user@example.com</div>
            <div class="email-note">
                이메일함을 확인하고 인증 링크를 클릭해주세요.<br>
                스팸함도 함께 확인해보세요.
            </div>
        </div>

        <!-- 단계 안내 -->
        <div class="steps-guide">
            <div class="steps-title">📋 다음 단계</div>
            <div class="step-item">
                <div class="step-number">1</div>
                <div class="step-text">이메일함에서 인증 메일을 찾아주세요</div>
            </div>
            <div class="step-item">
                <div class="step-number">2</div>
                <div class="step-text">"이메일 인증하기" 버튼을 클릭해주세요</div>
            </div>
            <div class="step-item">
                <div class="step-number">3</div>
                <div class="step-text">인증 완료 후 로그인하여 워크스페이스를 시작하세요</div>
            </div>
        </div>

        <!-- 액션 버튼들 -->
        <div class="action-buttons">
            <button class="btn btn-primary" onclick="openEmailApp()">
                <span>📬 이메일 앱 열기</span>
            </button>
            
            <button class="btn btn-secondary" id="resend-btn" onclick="resendEmail()">
                <div class="loading-spinner" id="loading-spinner"></div>
                <span id="resend-text">이메일 다시 보내기</span>
            </button>

            <div class="resend-timer" id="resend-timer" style="display: none;">
                이메일 재전송은 <span class="timer-text" id="timer-countdown">60</span>초 후 가능합니다
            </div>
        </div>

        <!-- 도움말 섹션 -->
        <div class="help-section">
            <div class="help-title">도움이 필요하세요?</div>
            <div class="help-links">
                <a href="#" class="help-link" onclick="showSupport()">고객 지원</a>
                <a href="#" class="help-link" onclick="changeEmail()">이메일 변경</a>
                <a href="#" class="help-link" onclick="goToLogin()">로그인 페이지</a>
            </div>
        </div>
    </div>

    <script>
        let resendTimer = 0;
        let timerInterval;

        // 페이지 로드시 사용자 이메일 설정 (실제로는 서버에서 받아옴)
        document.addEventListener('DOMContentLoaded', function() {
            // 실제로는 회원가입 시 입력한 이메일을 표시
            const userEmail = 'user@example.com'; // 실제 이메일로 교체
            document.getElementById('user-email').textContent = userEmail;
        });

        // 이메일 앱 열기
        function openEmailApp() {
            // 모바일에서는 기본 메일앱 열기
            if (/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
                window.location.href = 'mailto:';
            } else {
                // 데스크톱에서는 주요 이메일 서비스 선택 옵션 제공
                const choice = confirm('이메일 서비스를 선택하세요:\n확인 - Gmail\n취소 - 다른 이메일 앱');
                if (choice) {
                    window.open('https://mail.google.com', '_blank');
                } else {
                    window.location.href = 'mailto:';
                }
            }
        }

        // 이메일 재전송
        function resendEmail() {
            if (resendTimer > 0) {
                return;
            }

            const resendBtn = document.getElementById('resend-btn');
            const resendText = document.getElementById('resend-text');
            const spinner = document.getElementById('loading-spinner');
            const timerElement = document.getElementById('resend-timer');

            // 로딩 상태
            resendBtn.disabled = true;
            resendText.textContent = '전송 중...';
            spinner.style.display = 'inline-block';

            // 가짜 재전송 처리
            setTimeout(() => {
                spinner.style.display = 'none';
                resendText.textContent = '이메일을 다시 보냈습니다!';
                
                setTimeout(() => {
                    resendText.textContent = '이메일 다시 보내기';
                    startResendTimer();
                }, 2000);
            }, 1500);
        }

        // 재전송 타이머 시작
        function startResendTimer() {
            resendTimer = 60;
            const resendBtn = document.getElementById('resend-btn');
            const timerElement = document.getElementById('resend-timer');
            const countdown = document.getElementById('timer-countdown');

            resendBtn.disabled = true;
            timerElement.style.display = 'block';

            timerInterval = setInterval(() => {
                resendTimer--;
                countdown.textContent = resendTimer;

                if (resendTimer <= 0) {
                    clearInterval(timerInterval);
                    resendBtn.disabled = false;
                    timerElement.style.display = 'none';
                }
            }, 1000);
        }

        // 고객 지원
        function showSupport() {
            alert('📞 고객 지원\n\n이메일: support@workspace.com\n전화: 1588-1234\n운영시간: 평일 09:00-18:00');
        }

        // 이메일 변경
        function changeEmail() {
            const newEmail = prompt('새로운 이메일 주소를 입력하세요:');
            if (newEmail && newEmail.includes('@')) {
                if (confirm(`이메일을 ${newEmail}로 변경하시겠습니까?`)) {
                    document.getElementById('user-email').textContent = newEmail;
                    alert('✅ 이메일이 변경되었습니다.\n새로운 인증 메일을 발송했습니다.');
                }
            } else if (newEmail) {
                alert('올바른 이메일 주소를 입력해주세요.');
            }
        }

        // 로그인 페이지로 이동
        function goToLogin() {
            if (confirm('로그인 페이지로 이동하시겠습니까?\n(이메일 인증을 완료한 후 로그인하세요)')) {
                alert('로그인 페이지로 이동합니다.');
                // 실제로는 로그인 페이지로 리다이렉트
                // window.location.href = '/login';
            }
        }

        // 초기 타이머 시작 (재전송 남용 방지)
        setTimeout(() => {
            startResendTimer();
        }, 1000);

        // 인증 완료 시뮬레이션 (실제로는 서버에서 인증 상태 확인)
        setTimeout(() => {
            if (Math.random() > 0.7) { // 30% 확률로 자동 인증 완료 시뮬레이션
                if (confirm('🎉 이메일 인증이 완료되었습니다!\n계정 설정 페이지로 이동하시겠습니까?')) {
                    alert('계정 설정 페이지로 이동합니다.');
                    // 실제로는 계정 설정 페이지로 리다이렉트
                    // window.location.href = '/account-setup';
                }
            }
        }, 10000); // 10초 후
    </script>
</body>
</html>