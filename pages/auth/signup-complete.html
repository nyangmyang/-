<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íšŒì›ê°€ì… ì™„ë£Œ - WorkSpace</title>
    
    <!-- CSS íŒŒì¼ë“¤ ì„í¬íŠ¸ -->
    <link rel="stylesheet" href="../../css/common.css">
    <link rel="stylesheet" href="../../css/signup-complete.css">
</head>
<body>
    <!-- ë°°ê²½ ì• ë‹ˆë©”ì´ì…˜ -->
    <div class="bg-animation">
        <div class="floating-element"></div>
        <div class="floating-element"></div>
        <div class="floating-element"></div>
        <div class="floating-element"></div>
        <div class="floating-element"></div>
    </div>

    <div class="complete-container">
        <!-- ì„±ê³µ ì•„ì´ì½˜ -->
        <div class="success-icon">
            âœ…
        </div>

        <!-- ë©”ì¸ ë©”ì‹œì§€ -->
        <h1 class="title">íšŒì›ê°€ì… ì™„ë£Œ!</h1>
        <p class="subtitle">
            í™˜ì˜í•©ë‹ˆë‹¤! ğŸ‰<br>
            ì´ë©”ì¼ ì¸ì¦ ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.
        </p>

        <!-- ì´ë©”ì¼ ì •ë³´ -->
        <div class="email-info">
            <div class="email-icon">ğŸ“§</div>
            <div class="email-title">ì¸ì¦ ì½”ë“œë¥¼ ë°œì†¡í–ˆìŠµë‹ˆë‹¤</div>
            <div class="email-address" id="user-email">user@example.com</div>
            <div class="email-note">
                ìœ„ ì´ë©”ì¼ë¡œ 6ìë¦¬ ì¸ì¦ ì½”ë“œë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.<br>
                ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.
            </div>
        </div>

        <!-- ì¸ì¦ ì½”ë“œ ì…ë ¥ -->
        <div class="verification-section">
            <div class="verification-title">ğŸ“± ì¸ì¦ ì½”ë“œ ì…ë ¥</div>
            <div class="code-inputs">
                <input type="text" class="code-input" maxlength="1" id="code1">
                <input type="text" class="code-input" maxlength="1" id="code2">
                <input type="text" class="code-input" maxlength="1" id="code3">
                <input type="text" class="code-input" maxlength="1" id="code4">
                <input type="text" class="code-input" maxlength="1" id="code5">
                <input type="text" class="code-input" maxlength="1" id="code6">
            </div>
            <div class="validation-message" id="code-error"></div>
        </div>

        <!-- ì•¡ì…˜ ë²„íŠ¼ë“¤ -->
        <div class="action-buttons">
            <button class="btn btn-primary" onclick="verifyCode()" id="verify-btn">
                <div class="loading-spinner" id="loading-spinner"></div>
                <span id="verify-text">ì¸ì¦ ì™„ë£Œ</span>
            </button>
            
            <button class="btn btn-secondary" id="resend-btn" onclick="resendEmail()">
                <span id="resend-text">ì½”ë“œ ë‹¤ì‹œ ë³´ë‚´ê¸°</span>
            </button>

            <div class="resend-timer" id="resend-timer" style="display: none;">
                ì¬ì „ì†¡ì€ <span class="timer-text" id="timer-countdown">60</span>ì´ˆ í›„ ê°€ëŠ¥í•©ë‹ˆë‹¤
            </div>
        </div>

        <!-- ë„ì›€ë§ ì„¹ì…˜ -->
        <div class="help-section">
            <div class="help-title">ë„ì›€ì´ í•„ìš”í•˜ì„¸ìš”?</div>
            <div class="help-links">
                <a href="#" class="help-link" onclick="showSupport()">ê³ ê° ì§€ì›</a>
                <a href="#" class="help-link" onclick="changeEmail()">ì´ë©”ì¼ ë³€ê²½</a>
                <a href="#" class="help-link" onclick="goToLogin()">ë¡œê·¸ì¸ í˜ì´ì§€</a>
            </div>
        </div>
    </div>

    <script>
        let resendTimer = 0;
        let timerInterval;

        // ============================
        // ì´ˆê¸°í™”
        // ============================
        document.addEventListener('DOMContentLoaded', function() {
            const userEmail = 'user@example.com';
            document.getElementById('user-email').textContent = userEmail;
            setupCodeInputs();
        });

        // ============================
        // ì¸ì¦ ì½”ë“œ ì…ë ¥ ì„¤ì •
        // ============================
        function setupCodeInputs() {
            const inputs = document.querySelectorAll('.code-input');
            
            inputs.forEach((input, index) => {
                input.addEventListener('input', function(e) {
                    // ìˆ«ìë§Œ ì…ë ¥ í—ˆìš©
                    this.value = this.value.replace(/[^0-9]/g, '');
                    
                    // ë‹¤ìŒ ì…ë ¥ìœ¼ë¡œ ìë™ ì´ë™
                    if (this.value.length === 1 && index < inputs.length - 1) {
                        inputs[index + 1].focus();
                    }
                    
                    // ëª¨ë“  ì½”ë“œ ì…ë ¥ ì‹œ ìë™ ê²€ì¦
                    checkAllInputsFilled();
                });
                
                input.addEventListener('keydown', function(e) {
                    // ë°±ìŠ¤í˜ì´ìŠ¤ë¡œ ì´ì „ ì…ë ¥ìœ¼ë¡œ ì´ë™
                    if (e.key === 'Backspace' && this.value === '' && index > 0) {
                        inputs[index - 1].focus();
                    }
                    
                    // ì—”í„°í‚¤ë¡œ ì¸ì¦
                    if (e.key === 'Enter') {
                        verifyCode();
                    }
                });
            });
        }

        function checkAllInputsFilled() {
            const inputs = document.querySelectorAll('.code-input');
            const allFilled = Array.from(inputs).every(input => input.value.length === 1);
            
            document.getElementById('verify-btn').disabled = !allFilled;
            
            return allFilled;
        }

        function getEnteredCode() {
            const inputs = document.querySelectorAll('.code-input');
            return Array.from(inputs).map(input => input.value).join('');
        }

        // ============================
        // ì¸ì¦ ì½”ë“œ ê²€ì¦ (ê°œë°œìš©)
        // ============================
        function verifyCode() {
            const code = getEnteredCode();
            const verifyBtn = document.getElementById('verify-btn');
            const verifyText = document.getElementById('verify-text');
            const spinner = document.getElementById('loading-spinner');
            const errorMsg = document.getElementById('code-error');
            
            if (code.length !== 6) {
                showError('6ìë¦¬ ì¸ì¦ ì½”ë“œë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            // ë¡œë”© ìƒíƒœ
            verifyBtn.disabled = true;
            verifyText.textContent = 'ì¸ì¦ ì¤‘...';
            spinner.style.display = 'inline-block';
            errorMsg.textContent = '';

            // ê°œë°œìš©: ê°„ë‹¨í•œ ê²€ì¦ (123456 ë˜ëŠ” ì„ì˜ ì„±ê³µ)
            setTimeout(() => {
                if (code === '123456' || Math.random() > 0.3) { // 70% ì„±ê³µë¥ 
                    // ì„±ê³µ
                    verifyText.textContent = 'ì¸ì¦ ì™„ë£Œ!';
                    spinner.style.display = 'none';
                    
                    setTimeout(() => {
                        alert('ğŸ‰ ì´ë©”ì¼ ì¸ì¦ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');
                        window.location.href = 'account-setup.html';
                    }, 500);
                } else {
                    // ì‹¤íŒ¨
                    showError('ì¸ì¦ ì½”ë“œê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¤ì‹œ í™•ì¸í•´ì£¼ì„¸ìš”.');
                    
                    // ìƒíƒœ ì›ë³µ
                    verifyBtn.disabled = false;
                    verifyText.textContent = 'ì¸ì¦ ì™„ë£Œ';
                    spinner.style.display = 'none';
                    
                    // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
                    clearCodeInputs();
                }
            }, 1500);
        }

        function showError(message) {
            const errorMsg = document.getElementById('code-error');
            errorMsg.textContent = message;
            errorMsg.style.color = '#ef4444';
            errorMsg.style.fontSize = '14px';
            errorMsg.style.marginTop = '8px';
        }

        function clearCodeInputs() {
            document.querySelectorAll('.code-input').forEach(input => {
                input.value = '';
            });
            document.querySelector('.code-input').focus();
        }

        // ============================
        // ì´ë©”ì¼ ì¬ì „ì†¡
        // ============================
        function resendEmail() {
            if (resendTimer > 0) {
                return;
            }

            const resendBtn = document.getElementById('resend-btn');
            const resendText = document.getElementById('resend-text');

            // ë¡œë”© ìƒíƒœ
            resendBtn.disabled = true;
            resendText.textContent = 'ì „ì†¡ ì¤‘...';

            setTimeout(() => {
                resendText.textContent = 'ì½”ë“œë¥¼ ë‹¤ì‹œ ë³´ëƒˆìŠµë‹ˆë‹¤!';
                
                setTimeout(() => {
                    resendText.textContent = 'ì½”ë“œ ë‹¤ì‹œ ë³´ë‚´ê¸°';
                    startResendTimer();
                }, 2000);
            }, 1500);
        }

        function startResendTimer() {
            resendTimer = 60;
            const resendBtn = document.getElementById('resend-btn');
            const timerElement = document.getElementById('resend-timer');
            const countdown = document.getElementById('timer-countdown');

            resendBtn.disabled = true;
            timerElement.style.display = 'block';

            timerInterval = setInterval(() => {
                resendTimer--;
                countdown.textContent = resendTimer;

                if (resendTimer <= 0) {
                    clearInterval(timerInterval);
                    resendBtn.disabled = false;
                    timerElement.style.display = 'none';
                }
            }, 1000);
        }

        // ============================
        // ê¸°íƒ€ í•¨ìˆ˜ë“¤
        // ============================
        function showSupport() {
            alert('ğŸ“ ê³ ê° ì§€ì›\n\nì´ë©”ì¼: support@workspace.com\nì „í™”: 1588-1234\nìš´ì˜ì‹œê°„: í‰ì¼ 09:00-18:00');
        }

        function changeEmail() {
            const newEmail = prompt('ìƒˆë¡œìš´ ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”:');
            if (newEmail && newEmail.includes('@')) {
                if (confirm(`ì´ë©”ì¼ì„ ${newEmail}ë¡œ ë³€ê²½í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                    document.getElementById('user-email').textContent = newEmail;
                    alert('âœ… ì´ë©”ì¼ì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.\nìƒˆë¡œìš´ ì¸ì¦ ì½”ë“œë¥¼ ë°œì†¡í–ˆìŠµë‹ˆë‹¤.');
                    clearCodeInputs();
                }
            } else if (newEmail) {
                alert('ì˜¬ë°”ë¥¸ ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            }
        }

        function goToLogin() {
            if (confirm('ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                window.location.href = 'login.html';
            }
        }

        // ============================
        // ì´ˆê¸° ì„¤ì •
        // ============================
        setTimeout(() => {
            startResendTimer();
        }, 1000);

        // ============================
        // ê°œë°œìš© ë¹ ë¥¸ ë²„íŠ¼
        // ============================
        document.body.insertAdjacentHTML('beforeend', `
            <button onclick="quickVerify()" style="position:fixed; top:10px; right:10px; z-index:9999; background:green; color:white; padding:10px; border:none; border-radius:5px; cursor:pointer;">
                ë¹ ë¥¸ì¸ì¦
            </button>
        `);

        function quickVerify() {
            // 123456 ìë™ ì…ë ¥
            const inputs = document.querySelectorAll('.code-input');
            '123456'.split('').forEach((digit, index) => {
                inputs[index].value = digit;
            });
            checkAllInputsFilled();
            
            setTimeout(() => {
                verifyCode();
            }, 500);
        }

        // ê°œë°œì ë„êµ¬ìš©
        window.debugVerify = {
            fillCode: (code = '123456') => {
                const inputs = document.querySelectorAll('.code-input');
                code.split('').forEach((digit, index) => {
                    if (inputs[index]) inputs[index].value = digit;
                });
                checkAllInputsFilled();
            },
            quickVerify: quickVerify
        };
        
        console.log('ğŸ”§ ê°œë°œì ë„êµ¬ì—ì„œ debugVerify.fillCode() ë˜ëŠ” debugVerify.quickVerify()ë¥¼ ì‚¬ìš©í•˜ì—¬ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
    </script>

    <style>
        /* ì¸ì¦ ì½”ë“œ ì…ë ¥ ìŠ¤íƒ€ì¼ */
        .verification-section {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 12px;
            padding: 24px;
            margin: 24px 0;
            text-align: center;
        }

        .verification-title {
            font-size: 16px;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 16px;
        }

        .code-inputs {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-bottom: 12px;
        }

        .code-input {
            width: 50px;
            height: 50px;
            border: 2px solid #d1d5db;
            border-radius: 8px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            background: white;
            transition: border-color 0.2s;
        }

        .code-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .code-input:valid {
            border-color: #10b981;
        }

        @media (max-width: 480px) {
            .code-inputs {
                gap: 8px;
            }
            
            .code-input {
                width: 40px;
                height: 40px;
                font-size: 16px;
            }
        }
    </style>
</body>
</html>